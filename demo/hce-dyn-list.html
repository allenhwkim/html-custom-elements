<h2>hce-dyn-list</h2>

<p>
  hce-dyn-list changes its contents by source.
</p>
Types of source are:
<ul>
  <li>Array or Object
  <li>A Promise that returns array or object
</ul>

<h3>Source In Array</h3>
<div id="x1">
  <hce-dyn-list class="hdl" [source]="srcInArray1" (selected)="selected1(event)">
    <li>{{name.first}} {{name.last}}</li>
  </hce-dyn-list>
  Data Selected: <span class="data-selected"></span>
  <br/>
  <button onclick="document.querySelector('#x1 .hdl').source=srcInArray1">set source1</button>
  <button onclick="document.querySelector('#x1 .hdl').source=srcInArray2">set source2</button>
  <script id="s1">
    var srcInArray1 = [
      {name: {first: 'John', last: 'Doe'}},
      {name: {first: 'Jane', last: 'Dorothy'}}
    ];
    var srcInArray2 = [
      {name: {first: 'xxx John', last: 'xxx Doe'}},
      {name: {first: 'xxx Jane', last: 'xxx Dorothy'}},
    ];
    function selected1(event) {
      document.querySelector('#x1 .data-selected').innerHTML = event.detail.name.first;
    }
  </script>
</div>
<hr/>

<h3>Source In Object</h3>
<div id="x2">
  <hce-dyn-list class="hdl" [source]="srcInObject1" (selected)="selected2(event)">
    <li>{{key}} {{name.first}} {{name.last}}</li>
  </hce-dyn-list>
  Data Selected: <span class="data-selected"></span>
  <br/>
  <button onclick="document.querySelector('#x2 .hdl').source=srcInObject1">set source1</button>
  <button onclick="document.querySelector('#x2 .hdl').source=srcInObject2">set source2</button>
  <script id="s2">
    var srcInObject1 = {
      1: {name: {first: 'Obj xxx John', last: 'Doe'} },
      2: {name: {first: 'Obj xxx Jane', last: 'Dorothy'} },
      3: {name: {first: 'Obj xxx Third', last: 'Man'} }
    };
    var srcInObject2 = {
      1: {name: {first: 'Obj John', last: 'Doe'}},
      2: {name: {first: 'Obj Jane', last: 'Dorothy'}}
    };
    function selected2(event) {
      document.querySelector('#x2 .data-selected').innerHTML = event.detail.name.first;
    }
  </script>
</div>
<hr/>

<h3>Source In Promise</h3>
<div id="x3">
  <hce-dyn-list class="hdl" [source]="srcInPromiseArray" (selected)="selectedx3(event)">
    <li>{{name.first}} {{name.last}}</li>
  </hce-dyn-list>
  Data Selected: <span class="data-selected"></span>
  <br/>
  <button onclick="document.querySelector('#x3 .hdl').source=srcInPromiseArray">set source1</button>
  <button onclick="document.querySelector('#x3 .hdl').source=srcInPromiseObject">set source2</button>
  <script id="s2">
    var srcInPromiseArray = Promise.resolve({
      1: {name: {first: 'Promise John', last: 'Doe'} },
      2: {name: {first: 'Promise Jane', last: 'Dorothy'} },
      3: {name: {first: 'Promise Third', last: 'Man'} }
    });
    var srcInPromiseObject = Promise.resolve([
      {name: {first: 'Promise xxx John', last: 'xxx Doe'}},
      {name: {first: 'Promise xxx Jane', last: 'xxx Dorothy'}}
    ]);
    function selectedx3(event) {
      document.querySelector('#x3 .data-selected').innerHTML = event.detail.name.first;
    }
  </script>
</div>
<hr/>

<h3>Auto Complete</h3>
<div id="x4">
  <input id="keyword" />
  <hce-dyn-list [source-func]="getAutoComplete" visible-by="#keyword">
    <li>{{name.first}} {{name.last}}</li>
  </hce-dyn-list>
  <script id="s4">
    function getAutoComplete() {
      const keyword = document.querySelector('#x4 #keyword').value;
      if (keyword.length >= 2) {
        return new Promise(function (resolve, reject) {
          setTimeout( _ => {
            return resolve({
              1: {name: {first: keyword + ' John', last: 'Doe'} },
              2: {name: {first: keyword + ' Jane', last: 'Dorothy'} },
              3: {name: {first: keyword + 'Third', last: 'Man'} }
            });
          }, 1000);
        });
      }
    }
  </script>
</div>
<hr/>